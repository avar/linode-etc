# This file is used to configure how the plugins are invoked.
# Place in /etc/munin/plugin-conf.d/ or corresponding directory.
#
# PLEASE NOTE: Changes in the plugin-conf.d directory are only
# read at munin-node startup, so restart at any changes.
#
# user <user>         # Set the user to run the plugin as.
# group <group>       # Set the group to run the plugin as.
# command <command>   # Run <command> instead of the plugin. %c expands to
#                       what would normally be run.
# env.<variable> <value> # Sets <variable> in the plugin's environment, see the
#                       individual plugins to find out which variables they
#                       care about.

[apache_*]
env.url   http://127.0.0.1:%d/server-status?auto
env.ports 80

[cpu]
env.iowait_critical 50
env.iowait_warning 30
env.system_critical 50
env.system_warning 30
env.user_warning 80

[df]
env.exclude none unknown iso9660 squashfs udf romfs ramfs debugfs
env.warning 92
env.critical 98

[fail2ban_all_jails]
user root

[sockstat]
user root

[fw_conntrack]
user root

[fw_forwarded_local]
user root

[hddtemp_smartctl]
user root

[if_*]
user root

[if_err_*]
user nobody

[mysql*]
user root
env.mysqlopts --defaults-file=/etc/mysql/debian.cnf

[postfix_mailqueue]
user postfix

[postfix_mailstats]
group adm

[postfix_mailvolume]
group adm
env.logfile mail.log

[samba]
user root

[munin_stats]
user munin
group munin

[postgres_*]
user postgres
env.PGUSER postgres
env.PGPORT 5432

[rtom_*]
user leech
env.port 1337

[pdns_*]
user root

[mailman]
group list

[multiping_async_*]
env.category ping

[multiping_async_users]
env.title Ping times to our Unix users
#        v         hinrik      avar         hex           andreasg              dsg             
env.times 5
env.host localhost vodafone.is 188.105.94.3 87.194.39.109 www.telefonica.com.ar provider.dsg.to

[multiping_async_linode]
env.title Ping times to all the Linode clusters
# From http://www.linode.com/speedtest/
env.host  london1.linode.com newark1.linode.com atlanta1.linode.com dallas1.linode.com fremont1.linode.com

[multiping_async_vf_home]
env.title Ping times to Velfag
env.times 5
env.host 212.30.222.56 85.220.32.167

[tor_*]
user debian-tor
env.cookiefile /var/lib/tor/control_auth_cookie

[multips]
env.multipsnames bash screen apache2 avarpics app_openstreetmapis_web perl python sshd pdns_server qpsmtpd munin bondage spamd mysqld postgres emacs alvitur
#env.regex_pop3d ^[0-9]* pop3d:

[netstat_listen_localhost]
user root
env.host 127.0.0.1

[netstat_listen_wildcard]
user root
env.host 0.0.0.0

[homedirs]
env.dirs /home/*
env.basename 1

[dirs_var_www]
env.dirs /var/www/*
env.basename 1

[dirs_var_backup_github]
env.dirs /var/backup/github/*
env.basename 1

[dirs_var_backup_mysql]
env.user root
env.dirs /var/backup/mysql/*
env.basename 1

[dirs_var_lib_openstreetmap_mirror]
env.dirs /var/lib/openstreetmap-mirror/*
env.basename 1

[dirs_root]
env.dirs /*

[apache_vhost]
env.dirs /var/log/apache2/* (filtered)

#
# OpenStreetMap Iceland monitoring
#

[osm_apidb_*]
env.PGUSER osmis
env.PGPASSWORD osmis
env.PGDATABASE osmis

# Count node/ways/relations
[osm_apidb_primitive_count_nodes]
env.primitive nodes

[osm_apidb_primitive_count_ways]
env.primitive ways

[osm_apidb_primitive_count_relations]
env.primitive relations

# Count node/way/relation tags
[osm_apidb_primitive_tag_count_node]
env.primitive node

[osm_apidb_primitive_tag_count_way]
env.primitive way

[osm_apidb_primitive_tag_count_relation]
env.primitive relation

# Count nodes/ways/relations per user
[osm_apidb_user_count_nodes]
env.primitive nodes
env.limit 50

[osm_apidb_user_count_ways]
env.primitive ways
env.limit 25

[osm_apidb_user_count_relations]
env.primitive relations
env.limit 5

## Tag count

[osm_apidb_tags_node_*]
env.primitive node
env.limit 50
[osm_apidb_tags_way_*]
env.primitive way
env.limit 50
[osm_apidb_tags_relation_*]
env.primitive relation
env.limit 15

# Normal tags
[osm_apidb_tags_node_all]
env.k_blacklist source created_by converted_by
[osm_apidb_tags_way_all]
env.k_blacklist source created_by converted_by
[osm_apidb_tags_relation_all]
env.k_blacklist source created_by converted_by

# Source
[osm_apidb_tags_node_source]
env.graph_title The number of node source=* tags in OSM by value
env.graph_info The number of node source=* tags in the OpenStreetMap database by value
env.k_whitelist source
env.label_v_only 1
[osm_apidb_tags_way_source]
env.graph_title The number of way source=* tags in OSM by value
env.graph_info The number of way source=* tags in the OpenStreetMap database by value
env.k_whitelist source
env.label_v_only 1
[osm_apidb_tags_relation_source]
env.graph_title The number of relation source=* tags in OSM by value
env.graph_info The number of relation source=* tags in the OpenStreetMap database by value
env.k_whitelist source
env.label_v_only 1

[squid_*]
env.squidport 80

[hailo_failo]
env.name failo
env.test stats
env.mode load
env.file /var/lib/munin/plugin-state/hailo_/hailo-stats.json

[hailo_failo_reply_time]
env.name failo
env.test time
env.mode load
env.file /var/lib/munin/plugin-state/hailo_/hailo-time.json

[hailo_twatterhose]
env.test stats
env.mode load
env.name Twatterhose
env.file /var/lib/munin/plugin-state/hailo_/twatterhose-stats.json

[hailo_twatterhose_reply_time]
env.test time
env.mode load
env.name Twatterhose
env.file /var/lib/munin/plugin-state/hailo_/twatterhose-time.json

[vnstat_month]
env.limittt 800000

[freenet_gauge_threads]
env.title Freenet Java thread count
env.vlabel threads
env.info Number of threads
env.graph_info How many threads Freenet is using
env.label threads
env.what volatile.runningThreadCount

[freenet_gauge_avg_ping]
env.title Freenet average ping time
env.vlabel time
env.info Ping in milliseconds
env.graph_info How long it takes to ping our peer nodes in milliseconds on average
env.label milliseconds
env.what volatile.averagePingTime

[freenet_gauge_store_size]
env.title Freenet store size
env.vlabel bytes
env.info Store size in bytes
env.graph_info How big the local Freenet store is
env.label Store size
env.what volatile.storeSize
env.base 1024
env.draw AREA

[dirs_home_freenet_freenet_datastore]
env.dirs Freenet datastore
env.basename 1
env.category freenet
